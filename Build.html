<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8"/>
        <title>Building Math.NET Spatial
</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <meta name="description" content="Math.NET Spatial. .Net 4, .Net 3.5, SL5, Win8, WP8, PCL 47 and 136, Mono, Xamarin Android/iOS."/>
        <meta name="author" content="Christoph Ruegg, Johan Larsson"/>

        <script src="https://code.jquery.com/jquery-1.8.0.js"></script>
        <script src="https://code.jquery.com/ui/1.8.23/jquery-ui.js"></script>
        <script src="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script>
        <link href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap-combined.min.css" rel="stylesheet" />

        <link type="text/css" rel="stylesheet" href="https://spatial.mathdotnet.com/content/style.css" />
        <style>
          #main table:not(.pre) {
              border: 1px solid #dddddd;
              max-width: 100%;
              border-style: solid;
              border-width: 1px;
              border-color: gray;
              border-collapse: collapse;
              border-right-width: 1px;
              border-bottom-width: 1px;
              margin-top: 15px;
              margin-bottom: 25px;
          }
          #main table:not(.pre) th, #main table:not(.pre) td {
              border: 1px solid #dddddd;
              padding: 6px;
          }
          #main table:not(.pre) th p, #main table:not(.pre) td p {
              margin-bottom: 5px;
          }
        </style>
        <script type="text/javascript" src="https://spatial.mathdotnet.com/content/tips.js"></script>
        <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
        <!--[if lt IE 9]>
            <script src="https://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->

        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
        <div class="container">
            <div class="masthead">
                <ul class="nav nav-pills pull-right">
                    <li><a href="https://www.mathdotnet.com">Math.NET Project</a></li>
                    <li><a href="https://spatial.mathdotnet.com">Math.NET Spatial</a></li>
                    <li><a href="https://github.com/mathnet/mathnet-spatial">GitHub</a></li>
                </ul>
                <h3 class="muted">Math.NET Spatial</h3>
            </div>
            <hr />
            <div class="row">
                <div class="span9" id="main">
                    
<h1><a name="Building-Math-NET-Spatial" class="anchor" href="#Building-Math-NET-Spatial">Building Math.NET Spatial</a></h1>
<p>If you do not want to use the official binaries, or if you like to modify,
debug or contribute, you can compile locally either using Visual Studio or
manually with the build scripts.</p>
<h2><a name="VisualStudio-or-Xamarin-Studio" class="anchor" href="#VisualStudio-or-Xamarin-Studio">VisualStudio or Xamarin Studio</a></h2>
<p>We clearly separate dependency management from the IDE, you should therefore
run <code>restore.cmd</code> or <code>restore.sh</code> once after every git checkout in order to restore
the dependencies exactly as defined. Otherwise Visual Studio and other IDEs
may fail to compile or provide correct IntelliSense.</p>
<p>Tests can be run with the usual integrated NUnit test runners or ReSharper.</p>
<h2><a name="MSBuild-or-XBuild" class="anchor" href="#MSBuild-or-XBuild">MSBuild or XBuild</a></h2>
<p>Instead of a compatible IDE you can also build the solutions directly with
<code>msbuild</code>, or on Mono with <code>xbuild</code>. You may need to run <code>restore.cmd</code> or
<code>restore.sh</code> before, once after every git checkout in order to restore the dependencies.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="i">restore</span><span class="o">.</span><span class="i">cmd</span> (<span class="k">or</span> <span class="i">restore</span><span class="o">.</span><span class="i">sh</span>)            # <span class="i">restore</span> <span class="i">dependencies</span> (<span class="i">once</span>)
<span class="i">msbuild</span> <span class="i">MathNet</span><span class="o">.</span><span class="i">Spatial</span><span class="o">.</span><span class="i">sln</span>            # <span class="i">only</span> <span class="i">build</span> <span class="k">for</span> <span class="o">.</span><span class="i">Net</span> <span class="n">4</span> (<span class="i">main</span> <span class="i">solution</span>)
<span class="i">xbuild</span> <span class="i">MathNet</span><span class="o">.</span><span class="i">Spatial</span><span class="o">.</span><span class="i">sln</span>             # <span class="i">build</span> <span class="k">with</span> <span class="i">Mono</span>, <span class="i">e</span><span class="o">.</span><span class="i">g</span><span class="o">.</span> <span class="i">on</span> <span class="i">Linux</span> <span class="k">or</span> <span class="i">Mac</span>
</code></pre></td>
</tr>
</table>
<h2><a name="FAKE" class="anchor" href="#FAKE">FAKE</a></h2>
<p>The fully automated build including unit tests, documentation and api
reference, NuGet and Zip packages is using <a href="https://fsharp.github.io/FAKE/">FAKE</a>.</p>
<p>FAKE itself is not included in the repository but it will download and bootstrap
itself automatically when build.cmd is run the first time. Note that this step
is <em>not</em> required when using Visual Studio or <code>msbuild</code> directly.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="i">build</span><span class="o">.</span><span class="i">cmd</span>    # <span class="i">normal</span> <span class="i">build</span> (<span class="o">.</span><span class="i">Net</span> <span class="n">4.0</span>), <span class="i">run</span> <span onmouseout="hideTip(event, 'fs1', 1)" onmouseover="showTip(event, 'fs1', 1)" class="i">unit</span> <span class="i">tests</span> (<span class="o">.</span><span class="i">Net</span> <span class="i">on</span> <span class="i">Windows</span>)
<span class="o">.</span><span class="o">/</span><span class="i">build</span><span class="o">.</span><span class="i">sh</span>   # <span class="i">normal</span> <span class="i">build</span> (<span class="o">.</span><span class="i">Net</span> <span class="n">4.0</span>), <span class="i">run</span> <span onmouseout="hideTip(event, 'fs1', 2)" onmouseover="showTip(event, 'fs1', 2)" class="i">unit</span> <span class="i">tests</span> (<span class="i">Mono</span> <span class="i">on</span> <span class="i">Linux</span><span class="o">/</span><span class="i">Mac</span>, <span class="o">.</span><span class="i">Net</span> <span class="i">on</span> <span class="i">Windows</span>)

<span class="i">build</span><span class="o">.</span><span class="i">cmd</span> <span class="i">Build</span>              # <span class="i">normal</span> <span class="i">build</span> (<span class="o">.</span><span class="i">Net</span> <span class="n">4.0</span>)
<span class="i">build</span><span class="o">.</span><span class="i">cmd</span> <span class="i">Build</span> <span class="i">incremental</span>  # <span class="i">normal</span> <span class="i">build</span>, <span class="i">incremental</span> (<span class="o">.</span><span class="i">Net</span> <span class="n">4.0</span>)

<span class="i">build</span><span class="o">.</span><span class="i">cmd</span> <span class="i">Test</span>        # <span class="i">normal</span> <span class="i">build</span> (<span class="o">.</span><span class="i">Net</span> <span class="n">4.0</span>), <span class="i">run</span> <span onmouseout="hideTip(event, 'fs1', 3)" onmouseover="showTip(event, 'fs1', 3)" class="i">unit</span> <span class="i">tests</span>
<span class="i">build</span><span class="o">.</span><span class="i">cmd</span> <span class="i">Test</span> <span class="i">quick</span>  # <span class="i">normal</span> <span class="i">build</span> (<span class="o">.</span><span class="i">Net</span> <span class="n">4.0</span>), <span class="i">run</span> <span onmouseout="hideTip(event, 'fs1', 4)" onmouseover="showTip(event, 'fs1', 4)" class="i">unit</span> <span class="i">tests</span> <span class="i">except</span> <span class="i">long</span> <span class="i">running</span> <span class="i">ones</span>

<span class="i">build</span><span class="o">.</span><span class="i">cmd</span> <span class="i">Clean</span>  # <span class="i">cleanup</span> <span class="i">build</span> <span class="i">artifacts</span>
<span class="i">build</span><span class="o">.</span><span class="i">cmd</span> <span class="i">Docs</span>   # <span class="i">generate</span> <span class="i">documentation</span> (<span class="i">also</span> <span class="i">DocsDev</span>, <span class="i">DocsWatch</span>)
<span class="i">build</span><span class="o">.</span><span class="i">cmd</span> <span class="i">Api</span>    # <span class="i">generate</span> <span class="i">api</span> <span class="i">reference</span>
<span class="i">build</span><span class="o">.</span><span class="i">cmd</span> <span class="i">Zip</span>    # <span class="i">generate</span> <span class="i">zip</span> <span class="i">packages</span> (<span class="o">.</span><span class="i">Net</span> <span class="n">4.0</span>)
<span class="i">build</span><span class="o">.</span><span class="i">cmd</span> <span class="i">NuGet</span>  # <span class="i">generate</span> <span class="i">NuGet</span> <span class="i">packages</span> (<span class="o">.</span><span class="i">Net</span> <span class="n">4.0</span>)

<span class="i">build</span><span class="o">.</span><span class="i">cmd</span> <span class="i">All</span>    # <span class="i">build</span>, <span class="i">test</span>, <span class="i">docs</span>, <span class="i">api</span> <span class="i">reference</span> (<span class="o">.</span><span class="i">Net</span> <span class="n">4.0</span>)
</code></pre></td>
</tr>
</table>
<p>If the build or tests fail claiming that FSharp.Core was not be found, see
<a href="https://fsharp.org/use/windows/">fsharp.org</a> or install the
<a href="https://go.microsoft.com/fwlink/?LinkId=261286">Visual F# 3.0 Tools</a> directly.</p>
<h2><a name="Creating-a-Release" class="anchor" href="#Creating-a-Release">Creating a Release</a></h2>
<p>While only maintainers can make official releases published on NuGet and
referred to from the website, you can use the same tools to make your own
releases for your own purposes.</p>
<p>Versioning is controlled by the release notes. Before building a new version,
first add a new release header and change notes on top of the <code>RELEASENOTES.md</code>
document in the root directory. The fake builds pick this up and propagate it
to the assembly info files automatically.</p>
<p>The build can then be launched by calling:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="i">build</span><span class="o">.</span><span class="i">sh</span> <span class="i">All</span> <span class="i">release</span>    # <span class="i">full</span> <span class="i">release</span> <span class="i">build</span>
<span class="i">build</span><span class="o">.</span><span class="i">sh</span> <span class="i">NuGet</span> <span class="i">release</span>  # <span class="k">if</span> <span class="i">you</span> <span class="i">only</span> <span class="i">need</span> <span class="i">NuGet</span> <span class="i">packages</span>
<span class="i">build</span><span class="o">.</span><span class="i">sh</span> <span class="i">Zip</span> <span class="i">release</span>    # <span class="k">if</span> <span class="i">you</span> <span class="i">only</span> <span class="i">need</span> <span class="i">Zip</span> <span class="i">packages</span>
</code></pre></td>
</tr>
</table>
<p>The build script will print the current version as part of the the header banner,
which is also included in the release notes document in the build artifacts.
Example:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">//  __  __       _   _       _   _ ______ _______</span>
<span class="c">// |  \/  |     | | | |     | \ | |  ____|__   __|</span>
<span class="c">// | \  / | __ _| |_| |__   |  \| | |__     | |</span>
<span class="c">// | |\/| |/ _` | __| &#39;_ \  | . ` |  __|    | |</span>
<span class="c">// | |  | | (_| | |_| | | |_| |\  | |____   | |</span>
<span class="c">// |_|  |_|\__,_|\__|_| |_(_)_| \_|______|  |_|</span>
<span class="c">//</span>
<span class="c">// Math.NET Spatial - https://spatial.mathdotnet.com</span>
<span class="c">// Copyright (c) Math.NET - Open Source MIT/X11 License</span>
<span class="c">//</span>
<span class="c">// Math.NET Spatial  v2.3.0-beta1</span>
</code></pre></td>
</tr>
</table>
<p>The artifacts are then ready in the <code>out/packages</code> directory.</p>
<h2><a name="Official-Release-Process-Maintainers-only" class="anchor" href="#Official-Release-Process-Maintainers-only">Official Release Process (Maintainers only)</a></h2>
<ul>
<li><p>Update <code>RELEASENOTES.md</code> file with relevant changes, attributed by contributor (if external). Set date.</p></li>
<li><p>Update <code>CONTRIBUTORS.md</code> file (via <code>git shortlog -sn</code>)</p></li>
<li>
<p>Build Release:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="i">build</span><span class="o">.</span><span class="i">sh</span> <span class="i">All</span> <span class="i">release</span>
</code></pre></td>
</tr>
</table>
</li>
<li>Commit and push release notes and (auto-updated) assembly info files with new "Release: v1.2.3" commit</li>
<li>
<p>Publish Release:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="i">build</span><span class="o">.</span><span class="i">sh</span> <span class="i">PublishDocs</span>
<span class="i">build</span><span class="o">.</span><span class="i">sh</span> <span class="i">PublishApi</span>
<span class="i">build</span><span class="o">.</span><span class="i">sh</span> <span class="i">PublishTag</span>
<span class="i">build</span><span class="o">.</span><span class="i">sh</span> <span class="i">PublishMirrors</span>
<span class="i">build</span><span class="o">.</span><span class="i">sh</span> <span class="i">PublishNuGet</span>
</code></pre></td>
</tr>
</table>
<p>In theory there is also a <code>Publish</code> target to do this in one step, unfortunately
publishing to the NuGet gallery is quite unreliable.</p>
</li>
<li>Create new Codeplex and GitHub release, attach Zip files (to be automated)</li>
<li><p>Copy artifacts to <a href="https://1drv.ms/1uZ5IF0">release archive</a> (to be automated)</p></li>
<li><p>Consider a tweet via <a href="https://twitter.com/MathDotNet">@MathDotNet</a></p></li>
<li><p>Consider a post to the <a href="https://plus.google.com/112484567926928665204">Google+ site</a></p></li>
</ul>

<div class="tip" id="fs1">type unit = Unit<br /><br />Full name: Microsoft.FSharp.Core.unit</div>

                </div>
                <div class="span3">
                    <ul class="nav nav-list" id="menu">

                        <li class="nav-header">Math.NET Spatial</li>
                        <li><a href="https://spatial.mathdotnet.com">Project Website</a></li>
                        <li><a href="https://spatial.mathdotnet.com/ReleaseNotes.html">Release Notes</a></li>
                        <li><a href="https://spatial.mathdotnet.com/License.html">MIT/X11 License</a></li>
                        <li><a href="https://spatial.mathdotnet.com/api/">Class Reference</a></li>
                        <li><a href="https://github.com/mathnet/mathnet-spatial/issues">Issues & Bugs</a></li>

                        <li class="nav-header">Contributing</li>
                        <li><a href="https://spatial.mathdotnet.com/Contributors.html">Contributors</a></li>
                        <li><a href="https://spatial.mathdotnet.com/Contributing.html">Contributing</a></li>
                        <li><a href="https://spatial.mathdotnet.com/Build.html">Build & Tools</a></li>

                        <li class="nav-header">Getting Help</li>
                        <li><a href="https://discuss.mathdotnet.com/c/spatial">Discuss</a></li>
                        <li><a href="https://stackoverflow.com/questions/tagged/mathdotnet">Stack Overflow</a></li>
                        <li><a href="https://gitter.im/mathnet/mathnet-spatial">Chat</a></li>

                        <li class="nav-header">Getting Started</li>
                        <li><a href="https://spatial.mathdotnet.com/">Getting started</a></li>

                    </ul>
                </div>
            </div>
        </div>
    </body>
</html>
